<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Tarefas - Sistema de Produtividade</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --secondary: #6366f1;
            --accent: #8b5cf6;
            --success: #10b981;
            --success-light: #34d399;
            --danger: #ef4444;
            --danger-light: #f87171;
            --warning: #f59e0b;
            --warning-light: #fbbf24;
            --info: #3b82f6;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #f8fafc;
            --card: #ffffff;
            --border: #e5e7eb;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --sidebar-width: 280px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
        }

        /* Menu Hamburger */
        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .menu-toggle:hover {
            background: var(--secondary);
            transform: scale(1.05);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px 20px;
            transform: translateX(-100%);
            transition: transform 0.4s ease;
            z-index: 999;
            overflow-y: auto;
            box-shadow: 5px 0 25px rgba(0, 0, 0, 0.1);
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .sidebar-menu {
            list-style: none;
            margin-bottom: 40px;
        }

        .sidebar-menu li {
            margin-bottom: 10px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 15px;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            padding: 15px 20px;
            border-radius: var(--radius);
            transition: all 0.3s ease;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .sidebar-menu i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            margin-left: 0;
            transition: margin-left 0.4s ease;
            max-width: 100%;
        }

        .sidebar.active + .main-content {
            margin-left: var(--sidebar-width);
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            color: var(--primary);
            font-size: 2.2rem;
            font-weight: 700;
        }

        .current-date {
            background: var(--card);
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            border-left: 4px solid var(--accent);
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text);
        }

        /* Tabs de Navega√ß√£o */
        .section-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 30px;
            background: none;
            border: none;
            border-radius: 10px 10px 0 0;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            color: var(--primary);
            background: rgba(79, 70, 229, 0.05);
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            background: rgba(79, 70, 229, 0.1);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            border-top: 4px solid;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-card.completed {
            border-color: var(--success);
        }

        .stat-card.pending {
            border-color: var(--warning);
        }

        .stat-card.overdue {
            border-color: var(--danger);
        }

        .stat-card.productivity {
            border-color: var(--accent);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.8rem;
            color: white;
        }

        .stat-card.completed .stat-icon {
            background: linear-gradient(135deg, var(--success), var(--success-light));
        }

        .stat-card.pending .stat-icon {
            background: linear-gradient(135deg, var(--warning), var(--warning-light));
        }

        .stat-card.overdue .stat-icon {
            background: linear-gradient(135deg, var(--danger), var(--danger-light));
        }

        .stat-card.productivity .stat-icon {
            background: linear-gradient(135deg, var(--accent), #a78bfa);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-card.completed .stat-value {
            color: var(--success);
        }

        .stat-card.pending .stat-value {
            color: var(--warning);
        }

        .stat-card.overdue .stat-value {
            color: var(--danger);
        }

        .stat-card.productivity .stat-value {
            color: var(--accent);
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* Tasks Panel */
        .tasks-panel {
            background: var(--card);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .panel-title {
            color: var(--primary);
            font-size: 1.3rem;
            font-weight: 600;
        }

        .task-list {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
        }

        .task-item:hover {
            border-color: var(--accent);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }

        .task-item.completed {
            background: rgba(16, 185, 129, 0.05);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .task-item.overdue {
            background: rgba(239, 68, 68, 0.05);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .task-checkbox {
            width: 24px;
            height: 24px;
            margin-right: 20px;
            cursor: pointer;
            accent-color: var(--success);
        }

        .task-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.4rem;
            color: white;
            flex-shrink: 0;
            overflow: hidden;
        }

        .task-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .task-info {
            flex: 1;
            min-width: 0;
        }

        .task-name {
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .task-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: var(--text-light);
            flex-wrap: wrap;
        }

        .task-time {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .task-actions {
            display: flex;
            gap: 10px;
            margin-left: auto;
            padding-left: 15px;
            flex-shrink: 0;
        }

        .task-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: none;
            background: var(--card);
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .task-btn:hover {
            transform: translateY(-2px);
        }

        .task-btn.edit {
            color: var(--accent);
        }

        .task-btn.delete {
            color: var(--danger);
        }

        /* Task Status Badges */
        .task-status {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .status-overdue {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Form Panel */
        .form-panel {
            background: var(--card);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .form-title {
            color: var(--primary);
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: white;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .icon-upload {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .icon-preview {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--text-light);
            overflow: hidden;
        }

        .icon-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-btn {
            flex: 1;
            padding: 12px;
            background: var(--bg);
            border: 2px dashed var(--border);
            border-radius: 10px;
            color: var(--text-light);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: rgba(79, 70, 229, 0.05);
            border-color: var(--accent);
            color: var(--accent);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }

        /* Filtros */
        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: white;
            color: var(--text);
            font-size: 0.95rem;
            min-width: 150px;
        }

        /* Chart Panel */
        .chart-panel {
            background: var(--card);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        /* Celebration Modal */
        .celebration-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .celebration-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .celebration-content {
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.5s ease;
        }

        .celebration-modal.active .celebration-content {
            transform: scale(1);
        }

        .celebration-icon {
            font-size: 5rem;
            color: var(--success);
            margin-bottom: 20px;
            animation: pulse 1.5s infinite;
        }

        .celebration-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .celebration-message {
            color: var(--text);
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .celebration-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-light);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .celebration-close:hover {
            color: var(--danger);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .task-actions {
                margin-left: 0;
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .time-inputs {
                grid-template-columns: 1fr;
            }
            
            .filters {
                flex-direction: column;
            }
            
            .filter-select {
                min-width: 100%;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .sidebar.active + .main-content {
                margin-left: 0;
            }
            
            .tab-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        /* Scrollbar */
        .task-list::-webkit-scrollbar {
            width: 6px;
        }

        .task-list::-webkit-scrollbar-track {
            background: var(--bg);
            border-radius: 3px;
        }

        .task-list::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .task-list::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: var(--border);
        }

        /* Settings Panel */
        .settings-panel {
            background: var(--card);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .settings-group {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .settings-title {
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--bg);
            border-radius: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
    </style>
</head>
<body>
    <!-- Menu Hamburger -->
    <div class="menu-toggle" id="menu-toggle">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-tasks fa-2x"></i>
            <h2>Minhas Tarefas</h2>
        </div>
        
        <ul class="sidebar-menu">
            <li><a href="#" class="active" data-section="tasks"><i class="fas fa-list-check"></i> Minhas Tarefas</a></li>
            <li><a href="#" data-section="add-task"><i class="fas fa-plus-circle"></i> Adicionar Tarefa</a></li>
            <li><a href="#" data-section="analytics"><i class="fas fa-chart-line"></i> Estat√≠sticas</a></li>
            <li><a href="#" data-section="settings"><i class="fas fa-cog"></i> Configura√ß√µes</a></li>
        </ul>
        
        <div class="sidebar-footer" style="position: absolute; bottom: 30px; left: 20px; right: 20px; color: rgba(255,255,255,0.5); font-size: 0.9rem; text-align: center;">
            <p>Sistema de Produtividade Pessoal</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <!-- Header -->
        <div class="header">
            <h1 id="page-title">Minhas Tarefas</h1>
            <div class="current-date" id="current-date">
                Carregando data...
            </div>
        </div>

        <!-- Tabs de Navega√ß√£o -->
        <div class="section-tabs" id="section-tabs">
            <!-- Tabs ser√£o geradas dinamicamente via JavaScript -->
        </div>

        <!-- Se√ß√£o: Minhas Tarefas -->
        <section id="tasks-section" class="tab-content active">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card completed">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-value" id="completed-count">0</div>
                    <div class="stat-label">Conclu√≠das Hoje</div>
                </div>
                
                <div class="stat-card pending">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-value" id="pending-count">0</div>
                    <div class="stat-label">Pendentes</div>
                </div>
                
                <div class="stat-card overdue">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-value" id="overdue-count">0</div>
                    <div class="stat-label">Atrasadas</div>
                </div>
                
                <div class="stat-card productivity">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-value" id="productivity-score">0%</div>
                    <div class="stat-label">Produtividade</div>
                </div>
            </div>

            <!-- Tasks Panel -->
            <div class="tasks-panel">
                <div class="panel-header">
                    <h3 class="panel-title">Tarefas de Hoje</h3>
                    <div class="filters">
                        <select class="filter-select" id="task-filter-status">
                            <option value="all">Todas</option>
                            <option value="completed">Conclu√≠das</option>
                            <option value="pending">Pendentes</option>
                            <option value="overdue">Atrasadas</option>
                        </select>
                        <select class="filter-select" id="task-filter-category">
                            <option value="all">Todas Categorias</option>
                            <option value="work">Trabalho</option>
                            <option value="study">Estudo</option>
                            <option value="home">Casa</option>
                            <option value="health">Sa√∫de</option>
                        </select>
                    </div>
                </div>
                <div class="task-list" id="today-tasks">
                    <!-- Tarefas ser√£o carregadas aqui -->
                </div>
            </div>
        </section>

        <!-- Se√ß√£o: Adicionar Tarefa -->
        <section id="add-task-section" class="tab-content">
            <div class="form-panel">
                <h3 class="form-title">Adicionar Nova Tarefa</h3>
                <form id="task-form">
                    <div class="form-group">
                        <label class="form-label">T√≠tulo da Tarefa *</label>
                        <input type="text" class="form-input" id="task-title" placeholder="Digite o t√≠tulo da tarefa" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descri√ß√£o (opcional)</label>
                        <textarea class="form-textarea" id="task-description" placeholder="Descreva sua tarefa..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hor√°rio</label>
                        <div class="time-inputs">
                            <div>
                                <label class="form-label">In√≠cio</label>
                                <input type="time" class="form-input" id="task-start-time">
                            </div>
                            <div>
                                <label class="form-label">T√©rmino</label>
                                <input type="time" class="form-input" id="task-end-time">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" id="task-date" value="">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="task-category">
                            <option value="work">Trabalho</option>
                            <option value="study">Estudo</option>
                            <option value="home">Casa</option>
                            <option value="health">Sa√∫de</option>
                            <option value="leisure">Lazer</option>
                            <option value="shopping">Compras</option>
                            <option value="other">Outros</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">√çcone da Tarefa</label>
                        <div class="icon-upload">
                            <div class="icon-preview" id="icon-preview">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <label class="upload-btn">
                                <i class="fas fa-upload"></i> Escolher Imagem
                                <input type="file" id="icon-upload-input" accept="image/*" style="display: none;">
                            </label>
                        </div>
                        <p style="font-size: 0.85rem; color: var(--text-light); margin-top: 8px;">
                            Selecione uma imagem para personalizar sua tarefa (opcional)
                        </p>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Adicionar Tarefa
                    </button>
                </form>
            </div>
        </section>

        <!-- Se√ß√£o: Estat√≠sticas -->
        <section id="analytics-section" class="tab-content">
            <div class="chart-panel">
                <div class="panel-header">
                    <h3 class="panel-title">Gr√°fico de Produtividade</h3>
                    <select class="filter-select" id="chart-period">
                        <option value="week">Esta Semana</option>
                        <option value="month">Este M√™s</option>
                        <option value="year">Este Ano</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="productivity-chart"></canvas>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="chart-panel">
                    <h3 class="panel-title">Compara√ß√£o de Meses</h3>
                    <div class="chart-container">
                        <canvas id="month-comparison-chart"></canvas>
                    </div>
                </div>
                
                <div class="chart-panel">
                    <h3 class="panel-title">Tend√™ncia de Produtividade</h3>
                    <div class="chart-container">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o: Configura√ß√µes -->
        <section id="settings-section" class="tab-content">
            <div class="settings-panel">
                <h3 class="panel-title">Configura√ß√µes do Sistema</h3>
                
                <div class="settings-group">
                    <h4 class="settings-title">Notifica√ß√µes</h4>
                    
                    <div class="setting-item">
                        <div>
                            <strong>Notifica√ß√µes do Navegador</strong>
                            <p style="font-size: 0.9rem; color: var(--text-light);">Receba notifica√ß√µes sobre tarefas pendentes</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notifications-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div>
                            <strong>Lembretes Di√°rios</strong>
                            <p style="font-size: 0.9rem; color: var(--text-light);">Receba um resumo di√°rio de tarefas</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="daily-reminders-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h4 class="settings-title">Sons e M√∫sicas</h4>
                    
                    <div class="setting-item">
                        <div>
                            <strong>Som ao Concluir Tarefa</strong>
                            <p style="font-size: 0.9rem; color: var(--text-light);">Reproduzir som quando marcar tarefa como conclu√≠da</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="completion-sound-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div>
                            <strong>Som de Tarefa Atrasada</strong>
                            <p style="font-size: 0.9rem; color: var(--text-light);">Reproduzir som quando houver tarefas atrasadas</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="overdue-sound-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">URL da M√∫sica para Conclus√£o</label>
                        <input type="text" class="form-input" id="completion-music-url" placeholder="https://exemplo.com/musica-felicidade.mp3">
                        <p style="font-size: 0.85rem; color: var(--text-light); margin-top: 5px;">Deixe em branco para usar o som padr√£o</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">URL da M√∫sica para Tarefas Atrasadas</label>
                        <input type="text" class="form-input" id="overdue-music-url" placeholder="https://exemplo.com/musica-alerta.mp3">
                        <p style="font-size: 0.85rem; color: var(--text-light); margin-top: 5px;">Deixe em branco para usar o som padr√£o</p>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h4 class="settings-title">Dados</h4>
                    
                    <button class="btn btn-primary" id="export-data-btn" style="margin-bottom: 15px;">
                        <i class="fas fa-download"></i> Exportar Todas as Tarefas
                    </button>
                    
                    <button class="btn btn-primary" id="clear-data-btn" style="background: var(--danger);">
                        <i class="fas fa-trash"></i> Limpar Todas as Tarefas
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Celebration Modal -->
    <div class="celebration-modal" id="celebration-modal">
        <div class="celebration-content">
            <button class="celebration-close" id="celebration-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="celebration-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="celebration-title" id="celebration-title">üéâ Parab√©ns! üéâ</h2>
            <div class="celebration-message" id="celebration-message">
                Voc√™ concluiu mais uma tarefa! Continue assim, voc√™ est√° indo muito bem!
            </div>
            <button class="btn btn-primary" id="celebration-ok">
                <i class="fas fa-check"></i> Obrigado!
            </button>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="completion-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="overdue-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-buzzer-1551.mp3" type="audio/mpeg">
    </audio>

    <script>
        // =========================================
        // CONFIGURA√á√ÉO E DADOS
        // =========================================
        let tasks = [];
        let currentDate = new Date();
        let settings = {
            notifications: true,
            dailyReminders: true,
            completionSound: true,
            overdueSound: true,
            completionMusicUrl: '',
            overdueMusicUrl: ''
        };

        // Categorias de √≠cones
        const categoryIcons = {
            work: { icon: 'fas fa-briefcase', color: '#3b82f6' },
            study: { icon: 'fas fa-graduation-cap', color: '#8b5cf6' },
            home: { icon: 'fas fa-home', color: '#10b981' },
            health: { icon: 'fas fa-heartbeat', color: '#ef4444' },
            leisure: { icon: 'fas fa-gamepad', color: '#ec4899' },
            shopping: { icon: 'fas fa-shopping-cart', color: '#f59e0b' },
            other: { icon: 'fas fa-tasks', color: '#6b7280' }
        };

        // Mensagens de celebra√ß√£o
        const celebrationMessages = [
            "Excelente trabalho! Voc√™ est√° se tornando uma m√°quina de produtividade!",
            "Parab√©ns! Mais uma tarefa conclu√≠da com sucesso!",
            "Incr√≠vel! Voc√™ est√° dominando suas responsabilidades!",
            "Bom trabalho! Cada tarefa conclu√≠da √© um passo em dire√ß√£o aos seus objetivos!",
            "Fant√°stico! Sua dedica√ß√£o est√° rendendo frutos!",
            "Muito bem! Continue assim e voc√™ alcan√ßar√° tudo o que deseja!",
            "Uau! Voc√™ est√° em um ritmo impressionante!",
            "Excelente! Sua produtividade hoje est√° fora de s√©rie!",
            "Bravo! Mais uma vit√≥ria na sua jornada de produtividade!",
            "Impressionante! Voc√™ est√° construindo h√°bitos incr√≠veis!"
        ];

        // =========================================
        // INICIALIZA√á√ÉO
        // =========================================
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initializeApp();
            setupEventListeners();
            updateUI();
            checkOverdueTasks();
            setupNotificationPermission();
            
            // Atualizar a cada minuto para verificar tarefas atrasadas
            setInterval(checkOverdueTasks, 60000);
            // Atualizar data a cada segundo
            setInterval(updateCurrentDate, 1000);
        });

        function loadData() {
            // Carregar tarefas
            const savedTasks = localStorage.getItem('my-tasks-app-tasks');
            if (savedTasks) {
                try {
                    tasks = JSON.parse(savedTasks);
                } catch (e) {
                    console.error('Erro ao carregar tarefas:', e);
                    tasks = [];
                }
            }

            // Carregar configura√ß√µes
            const savedSettings = localStorage.getItem('my-tasks-app-settings');
            if (savedSettings) {
                try {
                    settings = JSON.parse(savedSettings);
                } catch (e) {
                    console.error('Erro ao carregar configura√ß√µes:', e);
                }
            }
        }

        function saveData() {
            localStorage.setItem('my-tasks-app-tasks', JSON.stringify(tasks));
            localStorage.setItem('my-tasks-app-settings', JSON.stringify(settings));
        }

        function initializeApp() {
            // Configurar data atual no formul√°rio
            document.getElementById('task-form').reset();
            document.getElementById('task-date').valueAsDate = new Date();
            
            // Configurar √≠cone padr√£o
            document.getElementById('icon-preview').innerHTML = '<i class="fas fa-tasks"></i>';
            
            // Atualizar selects de configura√ß√µes
            document.getElementById('notifications-toggle').checked = settings.notifications;
            document.getElementById('daily-reminders-toggle').checked = settings.dailyReminders;
            document.getElementById('completion-sound-toggle').checked = settings.completionSound;
            document.getElementById('overdue-sound-toggle').checked = settings.overdueSound;
            document.getElementById('completion-music-url').value = settings.completionMusicUrl;
            document.getElementById('overdue-music-url').value = settings.overdueMusicUrl;
            
            // Atualizar data atual
            updateCurrentDate();
            
            // Criar tabs dinamicamente
            createTabs();
            
            // Inicializar gr√°ficos
            initializeCharts();
        }

        function setupEventListeners() {
            // Menu toggle
            document.getElementById('menu-toggle').addEventListener('click', toggleSidebar);
            
            // Navega√ß√£o do sidebar
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    switchSection(section);
                    
                    // Atualizar classe ativa
                    document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Formul√°rio de tarefa
            document.getElementById('task-form').addEventListener('submit', addTask);
            
            // Upload de √≠cone
            document.getElementById('icon-upload-input').addEventListener('change', handleIconUpload);
            document.querySelector('.upload-btn').addEventListener('click', function() {
                document.getElementById('icon-upload-input').click();
            });
            
            // Filtros
            document.getElementById('task-filter-status').addEventListener('change', updateTodayTasks);
            document.getElementById('task-filter-category').addEventListener('change', updateTodayTasks);
            document.getElementById('chart-period').addEventListener('change', updateCharts);
            
            // Configura√ß√µes
            document.getElementById('notifications-toggle').addEventListener('change', function() {
                settings.notifications = this.checked;
                saveData();
                if (this.checked) setupNotificationPermission();
            });
            
            document.getElementById('daily-reminders-toggle').addEventListener('change', function() {
                settings.dailyReminders = this.checked;
                saveData();
            });
            
            document.getElementById('completion-sound-toggle').addEventListener('change', function() {
                settings.completionSound = this.checked;
                saveData();
            });
            
            document.getElementById('overdue-sound-toggle').addEventListener('change', function() {
                settings.overdueSound = this.checked;
                saveData();
            });
            
            document.getElementById('completion-music-url').addEventListener('change', function() {
                settings.completionMusicUrl = this.value;
                saveData();
            });
            
            document.getElementById('overdue-music-url').addEventListener('change', function() {
                settings.overdueMusicUrl = this.value;
                saveData();
            });
            
            // Exportar/importar dados
            document.getElementById('export-data-btn').addEventListener('click', exportData);
            document.getElementById('clear-data-btn').addEventListener('click', clearAllData);
            
            // Modal de celebra√ß√£o
            document.getElementById('celebration-close').addEventListener('click', closeCelebration);
            document.getElementById('celebration-ok').addEventListener('click', closeCelebration);
            
            // Fechar modal ao clicar fora
            document.getElementById('celebration-modal').addEventListener('click', function(e) {
                if (e.target === this) closeCelebration();
            });
        }

        // =========================================
        // FUN√á√ïES DE INTERFACE
        // =========================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function createTabs() {
            const tabsContainer = document.getElementById('section-tabs');
            const tabs = [
                { id: 'tasks', label: 'Minhas Tarefas', icon: 'fas fa-list-check' },
                { id: 'add-task', label: 'Adicionar Tarefa', icon: 'fas fa-plus-circle' },
                { id: 'analytics', label: 'Estat√≠sticas', icon: 'fas fa-chart-line' },
                { id: 'settings', label: 'Configura√ß√µes', icon: 'fas fa-cog' }
            ];
            
            tabs.forEach(tab => {
                const button = document.createElement('button');
                button.className = `tab-btn ${tab.id === 'tasks' ? 'active' : ''}`;
                button.setAttribute('data-tab', tab.id);
                button.innerHTML = `<i class="${tab.icon}"></i> ${tab.label}`;
                button.addEventListener('click', () => switchTab(tab.id));
                tabsContainer.appendChild(button);
            });
        }

        function switchTab(tabId) {
            // Atualizar bot√µes das tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-tab') === tabId) {
                    btn.classList.add('active');
                }
            });
            
            // Atualizar conte√∫do das tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(`${tabId}-section`).classList.add('active');
            
            // Atualizar t√≠tulo da p√°gina
            const titles = {
                'tasks': 'Minhas Tarefas',
                'add-task': 'Adicionar Tarefa',
                'analytics': 'Estat√≠sticas',
                'settings': 'Configura√ß√µes'
            };
            
            document.getElementById('page-title').textContent = titles[tabId] || 'Minhas Tarefas';
            
            // Atualizar a UI espec√≠fica da se√ß√£o
            if (tabId === 'tasks') {
                updateTodayTasks();
                updateStats();
            } else if (tabId === 'analytics') {
                updateCharts();
            }
            
            // Fechar sidebar em mobile
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        function switchSection(section) {
            switchTab(section);
            
            // Atualizar classe ativa no sidebar
            document.querySelectorAll('.sidebar-menu a').forEach(a => {
                a.classList.remove('active');
                if (a.getAttribute('data-section') === section) {
                    a.classList.add('active');
                }
            });
        }

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            const formatter = new Intl.DateTimeFormat('pt-BR', options);
            const dateString = formatter.format(now);
            document.getElementById('current-date').textContent = dateString;
        }

        function updateUI() {
            updateStats();
            updateTodayTasks();
        }

        // =========================================
        // FUN√á√ïES DE TAREFAS
        // =========================================
        function addTask(e) {
            e.preventDefault();
            
            const title = document.getElementById('task-title').value.trim();
            const description = document.getElementById('task-description').value.trim();
            const startTime = document.getElementById('task-start-time').value;
            const endTime = document.getElementById('task-end-time').value;
            const date = document.getElementById('task-date').value;
            const category = document.getElementById('task-category').value;
            const iconPreview = document.getElementById('icon-preview');
            
            if (!title) {
                showNotification('Por favor, digite um t√≠tulo para a tarefa!', 'error');
                return;
            }
            
            // Determinar √≠cone
            let icon = '';
            let iconType = 'icon'; // 'icon' ou 'image'
            
            if (iconPreview.querySelector('img')) {
                icon = iconPreview.querySelector('img').src;
                iconType = 'image';
            } else if (iconPreview.querySelector('i')) {
                icon = iconPreview.querySelector('i').className;
                iconType = 'icon';
            } else {
                // Usar √≠cone da categoria
                icon = categoryIcons[category].icon;
                iconType = 'icon';
            }
            
            const task = {
                id: Date.now() + Math.floor(Math.random() * 1000),
                title: title,
                description: description,
                startTime: startTime,
                endTime: endTime,
                date: date || new Date().toISOString().split('T')[0],
                category: category,
                completed: false,
                createdAt: new Date().toISOString(),
                completedAt: null,
                icon: icon,
                iconType: iconType,
                overdue: false
            };
            
            tasks.push(task);
            saveData();
            updateUI();
            
            // Resetar formul√°rio
            document.getElementById('task-form').reset();
            document.getElementById('task-date').valueAsDate = new Date();
            document.getElementById('icon-preview').innerHTML = '<i class="fas fa-tasks"></i>';
            
            showNotification('Tarefa adicionada com sucesso!');
            
            // Verificar se a tarefa j√° est√° atrasada
            checkTaskOverdue(task);
            
            // Mudar para a aba de tarefas
            switchTab('tasks');
        }

        function toggleTaskCompletion(id) {
            const task = tasks.find(t => t.id === id);
            if (!task) return;
            
            task.completed = !task.completed;
            task.completedAt = task.completed ? new Date().toISOString() : null;
            
            saveData();
            updateUI();
            
            if (task.completed) {
                // Tocar som de conclus√£o
                playCompletionSound();
                
                // Mostrar mensagem de celebra√ß√£o
                showCelebration();
                
                // Enviar notifica√ß√£o
                if (settings.notifications && notificationPermission) {
                    sendNotification('Tarefa Conclu√≠da!', `Voc√™ concluiu: ${task.title}`);
                }
            }
        }

        function editTask(id) {
            const task = tasks.find(t => t.id === id);
            if (!task) return;
            
            const newTitle = prompt('Novo t√≠tulo:', task.title);
            if (newTitle === null || newTitle.trim() === '') return;
            
            const newDescription = prompt('Nova descri√ß√£o:', task.description);
            if (newDescription === null) return;
            
            task.title = newTitle.trim();
            task.description = newDescription;
            
            saveData();
            updateUI();
            showNotification('Tarefa atualizada!');
        }

        function deleteTask(id) {
            if (confirm('Tem certeza que deseja excluir esta tarefa?')) {
                const initialLength = tasks.length;
                tasks = tasks.filter(t => t.id !== id);
                
                if (tasks.length < initialLength) {
                    saveData();
                    updateUI();
                    showNotification('Tarefa exclu√≠da!');
                } else {
                    showNotification('Tarefa n√£o encontrada!', 'error');
                }
            }
        }

        function checkTaskOverdue(task) {
            if (task.completed) return false;
            
            const taskDate = new Date(task.date);
            const today = new Date();
            
            // Se a data da tarefa for anterior a hoje, est√° atrasada
            if (taskDate < today && !isSameDay(taskDate, today)) {
                task.overdue = true;
                return true;
            }
            
            // Se for hoje, verificar o hor√°rio
            if (isSameDay(taskDate, today) && task.endTime) {
                const now = new Date();
                const [hours, minutes] = task.endTime.split(':');
                const endTime = new Date();
                endTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);
                
                if (now > endTime) {
                    task.overdue = true;
                    return true;
                }
            }
            
            task.overdue = false;
            return false;
        }

        function checkOverdueTasks() {
            let hasOverdue = false;
            
            tasks.forEach(task => {
                if (checkTaskOverdue(task)) {
                    hasOverdue = true;
                }
            });
            
            if (hasOverdue) {
                saveData();
                updateUI();
                
                // Tocar som de tarefa atrasada se configurado
                if (settings.overdueSound) {
                    playOverdueSound();
                }
                
                // Enviar notifica√ß√£o se configurado
                if (settings.notifications && notificationPermission) {
                    const overdueCount = tasks.filter(t => t.overdue && !t.completed).length;
                    if (overdueCount > 0) {
                        sendNotification('Tarefas Atrasadas!', `Voc√™ tem ${overdueCount} tarefa(s) atrasada(s)`);
                    }
                }
            }
        }

        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }

        function handleIconUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showNotification('Por favor, selecione um arquivo de imagem!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const iconPreview = document.getElementById('icon-preview');
                iconPreview.innerHTML = `<img src="${e.target.result}" alt="√çcone personalizado">`;
            };
            
            reader.readAsDataURL(file);
        }

        // =========================================
        // DASHBOARD E ESTAT√çSTICAS
        // =========================================
        function updateStats() {
            const today = new Date().toISOString().split('T')[0];
            const todayTasks = tasks.filter(t => t.date === today);
            const allTasks = tasks.filter(t => {
                const taskDate = new Date(t.date);
                const now = new Date();
                return taskDate.getMonth() === now.getMonth() && 
                       taskDate.getFullYear() === now.getFullYear();
            });
            
            // Tarefas de hoje
            const completedToday = todayTasks.filter(t => t.completed).length;
            const pendingToday = todayTasks.filter(t => !t.completed && !t.overdue).length;
            const overdueToday = todayTasks.filter(t => !t.completed && t.overdue).length;
            
            // Tarefas do m√™s
            const completedThisMonth = allTasks.filter(t => t.completed).length;
            const totalThisMonth = allTasks.length;
            const productivityScore = totalThisMonth > 0 ? Math.round((completedThisMonth / totalThisMonth) * 100) : 0;
            
            // Atualizar cards de estat√≠sticas
            document.getElementById('completed-count').textContent = completedToday;
            document.getElementById('pending-count').textContent = pendingToday;
            document.getElementById('overdue-count').textContent = overdueToday;
            document.getElementById('productivity-score').textContent = `${productivityScore}%`;
        }

        function updateTodayTasks() {
            const container = document.getElementById('today-tasks');
            const statusFilter = document.getElementById('task-filter-status').value;
            const categoryFilter = document.getElementById('task-filter-category').value;
            const today = new Date().toISOString().split('T')[0];
            
            let filteredTasks = tasks.filter(t => t.date === today);
            
            // Aplicar filtro de categoria
            if (categoryFilter !== 'all') {
                filteredTasks = filteredTasks.filter(t => t.category === categoryFilter);
            }
            
            // Aplicar filtro de status
            if (statusFilter === 'completed') {
                filteredTasks = filteredTasks.filter(t => t.completed);
            } else if (statusFilter === 'pending') {
                filteredTasks = filteredTasks.filter(t => !t.completed && !t.overdue);
            } else if (statusFilter === 'overdue') {
                filteredTasks = filteredTasks.filter(t => t.overdue && !t.completed);
            }
            
            // Ordenar: atrasadas primeiro, depois pendentes, depois conclu√≠das
            filteredTasks.sort((a, b) => {
                if (a.overdue && !a.completed && !(b.overdue && !b.completed)) return -1;
                if (!a.completed && a.overdue && b.completed) return -1;
                if (a.completed && !b.completed) return 1;
                return new Date(b.createdAt) - new Date(a.createdAt);
            });
            
            if (filteredTasks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <p>Nenhuma tarefa para hoje</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Adicione sua primeira tarefa usando o formul√°rio</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredTasks.map(task => {
                let statusClass = '';
                let statusText = '';
                
                if (task.completed) {
                    statusClass = 'status-completed';
                    statusText = 'Conclu√≠da';
                } else if (task.overdue) {
                    statusClass = 'status-overdue';
                    statusText = 'Atrasada';
                } else {
                    statusClass = 'status-pending';
                    statusText = 'Pendente';
                }
                
                // Formatar hor√°rio
                let timeInfo = '';
                if (task.startTime && task.endTime) {
                    timeInfo = `${task.startTime} - ${task.endTime}`;
                } else if (task.startTime) {
                    timeInfo = `In√≠cio: ${task.startTime}`;
                } else if (task.endTime) {
                    timeInfo = `T√©rmino: ${task.endTime}`;
                }
                
                // Determinar √≠cone
                let iconHtml = '';
                const categoryData = categoryIcons[task.category] || categoryIcons.other;
                
                if (task.iconType === 'image') {
                    iconHtml = `<img src="${task.icon}" alt="√çcone da tarefa">`;
                } else {
                    iconHtml = `<i class="${task.icon || categoryData.icon}"></i>`;
                }
                
                return `
                    <div class="task-item ${task.completed ? 'completed' : ''} ${task.overdue ? 'overdue' : ''}">
                        <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} 
                               onchange="toggleTaskCompletion(${task.id})">
                        
                        <div class="task-icon" style="background: ${categoryData.color}">
                            ${iconHtml}
                        </div>
                        
                        <div class="task-info">
                            <div class="task-name">${task.title}</div>
                            ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                            <div class="task-meta">
                                ${timeInfo ? `<div class="task-time"><i class="far fa-clock"></i> ${timeInfo}</div>` : ''}
                                <div class="task-time"><i class="fas fa-tag"></i> ${task.category}</div>
                            </div>
                        </div>
                        
                        <div class="task-actions">
                            <button class="task-btn edit" onclick="editTask(${task.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="task-btn delete" onclick="deleteTask(${task.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        
                        <div class="task-status ${statusClass}">
                            ${statusText}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // =========================================
        // GR√ÅFICOS
        // =========================================
        let productivityChart, monthComparisonChart, trendChart;

        function initializeCharts() {
            const ctx1 = document.getElementById('productivity-chart').getContext('2d');
            const ctx2 = document.getElementById('month-comparison-chart').getContext('2d');
            const ctx3 = document.getElementById('trend-chart').getContext('2d');
            
            // Gr√°fico de produtividade
            productivityChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Produtividade (%)',
                        data: [],
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderColor: '#4f46e5',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // Gr√°fico de compara√ß√£o de meses
            monthComparisonChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Tarefas Conclu√≠das',
                        data: [],
                        backgroundColor: '#10b981',
                        borderColor: '#059669',
                        borderWidth: 1
                    }, {
                        label: 'Tarefas Pendentes',
                        data: [],
                        backgroundColor: '#f59e0b',
                        borderColor: '#d97706',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // Gr√°fico de tend√™ncia
            trendChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Tend√™ncia de Produtividade',
                        data: [],
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderColor: '#10b981',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            updateCharts();
        }

        function updateCharts() {
            const period = document.getElementById('chart-period').value;
            
            // Atualizar gr√°fico de produtividade
            updateProductivityChart(period);
            
            // Atualizar gr√°fico de compara√ß√£o de meses
            updateMonthComparisonChart();
            
            // Atualizar gr√°fico de tend√™ncia
            updateTrendChart(period);
        }

        function updateProductivityChart(period) {
            let labels = [];
            let data = [];
            
            const now = new Date();
            
            if (period === 'week') {
                // √öltimos 7 dias
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    
                    const dayTasks = tasks.filter(t => t.date === dateStr);
                    const completed = dayTasks.filter(t => t.completed).length;
                    const total = dayTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(formatDateShort(date));
                    data.push(productivity);
                }
            } else if (period === 'month') {
                // √öltimos 30 dias (agrupados por semana)
                for (let i = 3; i >= 0; i--) {
                    const weekStart = new Date();
                    weekStart.setDate(weekStart.getDate() - (i * 7) - 6);
                    const weekEnd = new Date();
                    weekEnd.setDate(weekEnd.getDate() - (i * 7));
                    
                    const weekTasks = tasks.filter(t => {
                        const taskDate = new Date(t.date);
                        return taskDate >= weekStart && taskDate <= weekEnd;
                    });
                    
                    const completed = weekTasks.filter(t => t.completed).length;
                    const total = weekTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(`Sem ${i+1}`);
                    data.push(productivity);
                }
            } else { // year
                // √öltimos 12 meses
                for (let i = 11; i >= 0; i--) {
                    const month = new Date();
                    month.setMonth(month.getMonth() - i);
                    
                    const monthTasks = tasks.filter(t => {
                        const taskDate = new Date(t.date);
                        return taskDate.getFullYear() === month.getFullYear() && 
                               taskDate.getMonth() === month.getMonth();
                    });
                    
                    const completed = monthTasks.filter(t => t.completed).length;
                    const total = monthTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(month.toLocaleDateString('pt-BR', { month: 'short' }));
                    data.push(productivity);
                }
            }
            
            productivityChart.data.labels = labels;
            productivityChart.data.datasets[0].data = data;
            productivityChart.update();
        }

        function updateMonthComparisonChart() {
            const monthNames = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 
                               'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
            const currentMonth = new Date().getMonth();
            
            let labels = [];
            let completedData = [];
            let pendingData = [];
            
            // √öltimos 6 meses
            for (let i = 5; i >= 0; i--) {
                const month = new Date();
                month.setMonth(currentMonth - i);
                
                const monthTasks = tasks.filter(t => {
                    const taskDate = new Date(t.date);
                    return taskDate.getFullYear() === month.getFullYear() && 
                           taskDate.getMonth() === month.getMonth();
                });
                
                const completed = monthTasks.filter(t => t.completed).length;
                const pending = monthTasks.filter(t => !t.completed).length;
                
                labels.push(monthNames[month.getMonth()]);
                completedData.push(completed);
                pendingData.push(pending);
            }
            
            monthComparisonChart.data.labels = labels;
            monthComparisonChart.data.datasets[0].data = completedData;
            monthComparisonChart.data.datasets[1].data = pendingData;
            monthComparisonChart.update();
        }

        function updateTrendChart(period) {
            let labels = [];
            let data = [];
            
            if (period === 'week') {
                // Tend√™ncia das √∫ltimas 4 semanas
                for (let i = 3; i >= 0; i--) {
                    const weekStart = new Date();
                    weekStart.setDate(weekStart.getDate() - (i * 7) - 6);
                    const weekEnd = new Date();
                    weekEnd.setDate(weekEnd.getDate() - (i * 7));
                    
                    const weekTasks = tasks.filter(t => {
                        const taskDate = new Date(t.date);
                        return taskDate >= weekStart && taskDate <= weekEnd;
                    });
                    
                    const completed = weekTasks.filter(t => t.completed).length;
                    const total = weekTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(`Sem ${i+1}`);
                    data.push(productivity);
                }
            } else if (period === 'month') {
                // Tend√™ncia dos √∫ltimos 6 meses
                for (let i = 5; i >= 0; i--) {
                    const month = new Date();
                    month.setMonth(month.getMonth() - i);
                    
                    const monthTasks = tasks.filter(t => {
                        const taskDate = new Date(t.date);
                        return taskDate.getFullYear() === month.getFullYear() && 
                               taskDate.getMonth() === month.getMonth();
                    });
                    
                    const completed = monthTasks.filter(t => t.completed).length;
                    const total = monthTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(month.toLocaleDateString('pt-BR', { month: 'short' }));
                    data.push(productivity);
                }
            } else { // year
                // Tend√™ncia dos √∫ltimos 3 anos
                for (let i = 2; i >= 0; i--) {
                    const year = new Date();
                    year.setFullYear(year.getFullYear() - i);
                    
                    const yearTasks = tasks.filter(t => {
                        const taskDate = new Date(t.date);
                        return taskDate.getFullYear() === year.getFullYear();
                    });
                    
                    const completed = yearTasks.filter(t => t.completed).length;
                    const total = yearTasks.length;
                    const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    labels.push(year.getFullYear().toString());
                    data.push(productivity);
                }
            }
            
            trendChart.data.labels = labels;
            trendChart.data.datasets[0].data = data;
            trendChart.update();
        }

        function formatDateShort(date) {
            return date.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' });
        }

        // =========================================
        // NOTIFICA√á√ïES
        // =========================================
        let notificationPermission = false;

        function setupNotificationPermission() {
            if (!("Notification" in window)) {
                console.log("Este navegador n√£o suporta notifica√ß√µes");
                return;
            }
            
            if (Notification.permission === "granted") {
                notificationPermission = true;
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    notificationPermission = permission === "granted";
                });
            }
        }

        function sendNotification(title, body) {
            if (!notificationPermission || !settings.notifications) return;
            
            try {
                const notification = new Notification(title, {
                    body: body,
                    icon: '/favicon.ico'
                });
                
                notification.onclick = function() {
                    window.focus();
                    this.close();
                };
            } catch (error) {
                console.error("Erro ao enviar notifica√ß√£o:", error);
            }
        }

        // =========================================
        // SONS E CELEBRA√á√ÉO
        // =========================================
        function playCompletionSound() {
            if (!settings.completionSound) return;
            
            try {
                const audio = document.getElementById('completion-sound');
                
                // Se houver URL personalizada, usar ela
                if (settings.completionMusicUrl) {
                    const customAudio = new Audio(settings.completionMusicUrl);
                    customAudio.play().catch(e => {
                        console.error("Erro ao reproduzir √°udio personalizado:", e);
                        // Fallback para √°udio padr√£o
                        audio.currentTime = 0;
                        audio.play();
                    });
                } else {
                    audio.currentTime = 0;
                    audio.play();
                }
            } catch (error) {
                console.error("Erro ao reproduzir som:", error);
            }
        }

        function playOverdueSound() {
            if (!settings.overdueSound) return;
            
            try {
                const audio = document.getElementById('overdue-sound');
                
                // Se houver URL personalizada, usar ela
                if (settings.overdueMusicUrl) {
                    const customAudio = new Audio(settings.overdueMusicUrl);
                    customAudio.play().catch(e => {
                        console.error("Erro ao reproduzir √°udio personalizado:", e);
                        // Fallback para √°udio padr√£o
                        audio.currentTime = 0;
                        audio.play();
                    });
                } else {
                    audio.currentTime = 0;
                    audio.play();
                }
            } catch (error) {
                console.error("Erro ao reproduzir som:", error);
            }
        }

        function showCelebration() {
            // Selecionar mensagem aleat√≥ria
            const randomMessage = celebrationMessages[Math.floor(Math.random() * celebrationMessages.length)];
            
            document.getElementById('celebration-message').textContent = randomMessage;
            document.getElementById('celebration-modal').classList.add('active');
            
            // Fechar automaticamente ap√≥s 5 segundos
            setTimeout(() => {
                closeCelebration();
            }, 5000);
        }

        function closeCelebration() {
            document.getElementById('celebration-modal').classList.remove('active');
        }

        // =========================================
        // EXPORTA√á√ÉO E LIMPEZA DE DADOS
        // =========================================
        function exportData() {
            const data = {
                tasks: tasks,
                settings: settings,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `minhas-tarefas-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Dados exportados com sucesso!');
        }

        function clearAllData() {
            if (confirm('Tem certeza que deseja limpar TODOS os dados? Isso n√£o pode ser desfeito!')) {
                tasks = [];
                settings = {
                    notifications: true,
                    dailyReminders: true,
                    completionSound: true,
                    overdueSound: true,
                    completionMusicUrl: '',
                    overdueMusicUrl: ''
                };
                
                saveData();
                updateUI();
                
                showNotification('Todos os dados foram limpos!');
            }
        }

        // =========================================
        // UTILIT√ÅRIOS
        // =========================================
        function showNotification(message, type = 'success') {
            // Criar notifica√ß√£o
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 30px;
                right: 30px;
                padding: 20px 25px;
                background: ${type === 'error' ? 'var(--danger)' : type === 'info' ? 'var(--info)' : 'var(--success)'};
                color: white;
                border-radius: 10px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: fadeIn 0.3s ease;
                display: flex;
                align-items: center;
                gap: 15px;
                max-width: 400px;
                font-weight: 500;
            `;
            
            const icon = type === 'error' ? 'exclamation-circle' : 
                        type === 'info' ? 'info-circle' : 'check-circle';
            
            notification.innerHTML = `
                <i class="fas fa-${icon}" style="font-size: 1.5rem;"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
